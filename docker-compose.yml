version: "3.9"

services:
  docksentinel:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8080:80"
      - "3000:3000" #Exposing port 3000 for docksentinel API
    environment:
      PORT: "3000"
      LOG_LEVEL: "debug"
      DATABASE_URL: "file:/data/docksentinel.db"
      SCHEDULER_INTERVAL_MIN: "5"
      DOCKSENTINEL_SECRET: "CHANGE_ME_CHANGE_ME_CHANGE_ME_32CHARS_MIN"
      AUTO_MIGRATE: "true"
      SWAGGER_ENABLED: "true"
      CORS_ORIGINS: "*"
      TZ: "America/Sao_Paulo"
    volumes:
      - docksentinel_data:/data
      - /var/run/docker.sock:/var/run/docker.sock

volumes:
  docksentinel_data:
